(function ( $ ) {
  function Char( value, string ) {
    this.string = string;
    this.value = value;
    return this;
  }

  function SingleLineChar( value, string ) {
    Char.apply(this, arguments);
    this.string = string;
    this.value = value;
    return this;
  }

  SingleLineChar.prototype = Object.create(Char.prototype);

  function MultiLineChar( value, lines ) {
    Char.apply(this, arguments);
    this.value = value;
    this.lines = lines;
    return this;
  }

  MultiLineChar.prototype = Object.create(Char.prototype);

  function Font( name, chars, lineHeight ) {
    this.lineHeight = lineHeight || 1;
    let alphabet = new Map();

    chars.forEach(function ( element ) {
      if (lineHeight === 1) {
        let string = [];
        string[ 0 ] = element.string;
        alphabet.set(element.value, string);
      } else {
        alphabet.set(element.value, element.lines);
      }
    });

    this.alphabet = alphabet;
    return this;
  }

  Font.prototype.write = function ( text, to ) {
    let output = "";
    if (typeof to !== 'function') {
      for (let j = 0; j < this.lineHeight; j++) {
        let value = this.render(text)[j];
        output += value+"\n";
      }
    } else {
      for (let j = 0; j < this.lineHeight; j++) {
        to(this.render(text)[ j ]);
      }
    }
    return output;
  };

  Font.prototype.render = function ( text ) {
    let output = {};
    for (let j = 0; j < this.lineHeight; j++) {
      output[ j ] = '';
    }
    for (let i = 0; i < text.length; i++) {
      for (let j = 0; j <= this.lineHeight; j++) {
        output[ j ] += this.alphabet.get(text.charAt(i))[ j ] + ' ';
      }
    }
    return output;
  };

  function createMultilineFont( string ) {
    let input = string.split('@@@');
    let output = [input.length];
    for (let i = 0; i < input.length; i++) {
      let splitted = input[ i ].split('@@');
      let lines = splitted[ 1 ].split('@');
      output[ i ] = new MultiLineChar(splitted[ 0 ], lines);
    }
    return output;
  }

  let dollarAlphabet = ' @@    @    @    @    @    @    @    @    @    @    @    @    @@@A@@  ______  @ /      \\ @/$$$$$$  |@$$ |__$$ |@$$    $$ |@$$$$$$$$ |@$$ |  $$ |@$$ |  $$ |@$$/   $$/ @          @          @          @@@B@@ _______  @/       \\ @$$$$$$$  |@$$ |__$$ |@$$    $$< @$$$$$$$  |@$$ |__$$ |@$$    $$/ @$$$$$$$/  @          @          @          @@@C@@  ______  @ /      \\ @/$$$$$$  |@$$ |  $$/ @$$ |      @$$ |   __ @$$ \\__/  |@$$    $$/ @ $$$$$$/  @          @          @          @@@D@@ _______  @/       \\ @$$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$ |__$$ |@$$    $$/ @$$$$$$$/  @          @          @          @@@E@@ ________ @/        |@$$$$$$$$/ @$$ |__    @$$    |   @$$$$$/    @$$ |_____ @$$       |@$$$$$$$$/ @          @          @          @@@F@@ ________ @/        |@$$$$$$$$/ @$$ |__    @$$    |   @$$$$$/    @$$ |      @$$ |      @$$/       @          @          @          @@@G@@  ______  @ /      \\ @/$$$$$$  |@$$ | _$$/ @$$ |/    |@$$ |$$$$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@H@@ __    __ @/  |  /  |@$$ |  $$ |@$$ |__$$ |@$$    $$ |@$$$$$$$$ |@$$ |  $$ |@$$ |  $$ |@$$/   $$/ @          @          @          @@@I@@ ______ @/      |@$$$$$$/ @  $$ |  @  $$ |  @  $$ |  @ _$$ |_ @/ $$   |@$$$$$$/ @        @        @        @@@J@@    _____ @   /     |@   $$$$$ |@      $$ |@ __   $$ |@/  |  $$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@K@@ __    __ @/  |  /  |@$$ | /$$/ @$$ |/$$/  @$$  $$<   @$$$$$  \\  @$$ |$$  \\ @$$ | $$  |@$$/   $$/ @          @          @          @@@L@@ __       @/  |      @$$ |      @$$ |      @$$ |      @$$ |      @$$ |_____ @$$       |@$$$$$$$$/ @          @          @          @@@M@@ __       __ @/  \\     /  |@$$  \\   /$$ |@$$$  \\ /$$$ |@$$$$  /$$$$ |@$$ $$ $$/$$ |@$$ |$$$/ $$ |@$$ | $/  $$ |@$$/      $$/ @             @             @             @@@N@@ __    __ @/  \\  /  |@$$  \\ $$ |@$$$  \\$$ |@$$$$  $$ |@$$ $$ $$ |@$$ |$$$$ |@$$ | $$$ |@$$/   $$/ @          @          @          @@@O@@  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@P@@ _______  @/       \\ @$$$$$$$  |@$$ |__$$ |@$$    $$/ @$$$$$$$/  @$$ |      @$$ |      @$$/       @          @          @          @@@Q@@  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$ |_ $$ |@$$ / \\$$ |@$$ $$ $$< @ $$$$$$  |@     $$$/ @          @          @@@R@@ _______  @/       \\ @$$$$$$$  |@$$ |__$$ |@$$    $$< @$$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$/   $$/ @          @          @          @@@S@@  ______  @ /      \\ @/$$$$$$  |@$$ \\__$$/ @$$      \\ @ $$$$$$  |@/  \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@T@@ ________ @/        |@$$$$$$$$/ @   $$ |   @   $$ |   @   $$ |   @   $$ |   @   $$ |   @   $$/    @          @          @          @@@U@@ __    __ @/  |  /  |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@V@@ __     __ @/  |   /  |@$$ |   $$ |@$$ |   $$ |@$$  \\ /$$/ @ $$  /$$/  @  $$ $$/   @   $$$/    @    $/     @           @           @           @@@W@@ __       __ @/  |  _  /  |@$$ | / \\ $$ |@$$ |/$  \\$$ |@$$ /$$$  $$ |@$$ $$/$$ $$ |@$$$$/  $$$$ |@$$$/    $$$ |@$$/      $$/ @             @             @             @@@X@@ __    __ @/  |  /  |@$$ |  $$ |@$$  \\/$$/ @ $$  $$<  @  $$$$  \\ @ $$ /$$  |@$$ |  $$ |@$$/   $$/ @          @          @          @@@Y@@ __      __ @/  \\    /  |@$$  \\  /$$/ @ $$  \\/$$/  @  $$  $$/   @   $$$$/    @    $$ |    @    $$ |    @    $$/     @            @            @            @@@Z@@ ________ @/        |@$$$$$$$$/ @    /$$/  @   /$$/   @  /$$/    @ /$$/____ @/$$      |@$$$$$$$$/ @          @          @          @@@a@@          @          @  ______  @ /      \\ @ $$$$$$  |@ /    $$ |@/$$$$$$$ |@$$    $$ |@ $$$$$$$/ @          @          @          @@@b@@ __       @/  |      @$$ |____  @$$      \\ @$$$$$$$  |@$$ |  $$ |@$$ |__$$ |@$$    $$/ @$$$$$$$/  @          @          @          @@@c@@          @          @  _______ @ /       |@/$$$$$$$/ @$$ |      @$$ \\_____ @$$       |@ $$$$$$$/ @          @          @          @@@d@@       __ @      /  |@  ____$$ |@ /    $$ |@/$$$$$$$ |@$$ |  $$ |@$$ \\__$$ |@$$    $$ |@ $$$$$$$/ @          @          @          @@@e@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$    $$ |@$$$$$$$$/ @$$       |@ $$$$$$$/ @          @          @          @@@f@@  ______  @ /      \\ @/$$$$$$  |@$$ |_ $$/ @$$   |    @$$$$/     @$$ |      @$$ |      @$$/       @          @          @          @@@g@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ \\__$$ |@$$    $$ |@ $$$$$$$ |@/  \\__$$ |@$$    $$/ @ $$$$$$/  @@@h@@ __       @/  |      @$$ |____  @$$      \\ @$$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$/   $$/ @          @          @          @@@i@@ __ @/  |@$$/ @/  |@$$ |@$$ |@$$ |@$$ |@$$/ @    @    @    @@@j@@          @          @       __ @      /  |@      $$/ @      /  |@      $$ |@      $$ |@ __   $$ |@/  \\__$$ |@$$    $$/ @ $$$$$$/  @@@k@@ __       @/  |      @$$ |   __ @$$ |  /  |@$$ |_/$$/ @$$   $$<  @$$$$$$  \\ @$$ | $$  |@$$/   $$/ @          @          @          @@@l@@ __ @/  |@$$ |@$$ |@$$ |@$$ |@$$ |@$$ |@$$/ @    @    @    @@@m@@              @              @ _____  ____  @/     \\/    \\ @$$$$$$ $$$$  |@$$ | $$ | $$ |@$$ | $$ | $$ |@$$ | $$ | $$ |@$$/  $$/  $$/ @              @              @              @@@n@@          @          @ _______  @/       \\ @$$$$$$$  |@$$ |  $$ |@$$ |  $$ |@$$ |  $$ |@$$/   $$/ @          @          @          @@@o@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@p@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ |__$$ |@$$    $$/ @$$$$$$$/  @$$ |      @$$ |      @$$/       @@@q@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$ |  $$ |@$$ \\__$$ |@$$    $$ |@ $$$$$$$ |@      $$ |@      $$ |@      $$/ @@@r@@          @          @  ______  @ /      \\ @/$$$$$$  |@$$ |  $$/ @$$ |      @$$ |      @$$/       @          @          @          @@@s@@          @          @  _______ @ /       |@/$$$$$$$/ @$$      \\ @ $$$$$$  |@/     $$/ @$$$$$$$/  @          @          @          @@@t@@   __     @  /  |    @ _$$ |_   @/ $$   |  @$$$$$$/   @  $$ | __ @  $$ |/  |@  $$  $$/ @   $$$$/  @          @          @          @@@u@@          @          @ __    __ @/  |  /  |@$$ |  $$ |@$$ |  $$ |@$$ \\__$$ |@$$    $$/ @ $$$$$$/  @          @          @          @@@v@@           @           @ __     __ @/  \\   /  |@$$  \\ /$$/ @ $$  /$$/  @  $$ $$/   @   $$$/    @    $/     @           @           @           @@@w@@              @              @ __   __   __ @/  | /  | /  |@$$ | $$ | $$ |@$$ | $$ | $$ |@$$ \\_$$ \\_$$ |@$$   $$   $$/ @ $$$$$/$$$$/  @              @              @              @@@x@@          @          @ __    __ @/  \\  /  |@$$  \\/$$/ @ $$  $$<  @ /$$$$  \\ @/$$/ $$  |@$$/   $$/ @          @          @          @@@y@@          @          @ __    __ @/  |  /  |@$$ |  $$ |@$$ |  $$ |@$$ \\__$$ |@$$    $$ |@ $$$$$$$ |@/  \\__$$ |@$$    $$/ @ $$$$$$/  @@@z@@          @          @ ________ @/        |@$$$$$$$$/ @  /  $$/  @ /$$$$/__ @/$$      |@$$$$$$$$/ @          @          @          @@@.@@    @    @    @    @    @    @ __ @/  |@$$/ @    @    @    @@@!@@ __ @/  |@$$ |@$$ |@$$ |@$$/ @ __ @/  |@$$/ @    @    @    @@@?@@  ____  @ /    \\ @/$$$$  |@$$  $$ |@   /$$/ @  /$$/  @  $$/   @  /  |  @  $$/   @        @        @        ';
  let isoAlphabet = ' @@   @   @   @   @   @   @   @   @   @   @   @@@A@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\  \\ @ /:/\\:\\ \\:\\__\\@ \\/__\\:\\/:/  /@      \\::/  / @      /:/  /  @     /:/  /   @     \\/__/    @@@B@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\__\\ @ /:/\\:\\ \\:|__|@ \\:\\~\\:\\/:/  /@  \\:\\ \\::/  / @   \\:\\/:/  /  @    \\::/__/   @     ~~       @@@C@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /:/  \\:\\  \\ @ /:/__/ \\:\\__\\@ \\:\\  \\  \\/__/@  \\:\\  \\      @   \\:\\  \\     @    \\:\\__\\    @     \\/__/    @@@D@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /:/  \\:\\__\\ @ /:/__/ \\:|__|@ \\:\\  \\ /:/  /@  \\:\\  /:/  / @   \\:\\/:/  /  @    \\::/__/   @     ~~       @@@E@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\  \\ @ /:/\\:\\ \\:\\__\\@ \\:\\~\\:\\ \\/__/@  \\:\\ \\:\\__\\  @   \\:\\ \\/__/  @    \\:\\__\\    @     \\/__/    @@@F@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\  \\ @ /:/\\:\\ \\:\\__\\@ \\/__\\:\\ \\/__/@      \\:\\__\\  @       \\/__/  @              @              @@@G@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /:/  \\:\\  \\ @ /:/__/_\\:\\__\\@ \\:\\  /\\ \\/__/@  \\:\\ \\:\\__\\  @   \\:\\/:/  /  @    \\::/  /   @     \\/__/    @@@H@@      ___     @     /\\__\\    @    /:/  /    @   /:/__/     @  /::\\  \\ ___ @ /:/\\:\\  /\\__\\@ \\/__\\:\\/:/  /@      \\::/  / @      /:/  /  @     /:/  /   @     \\/__/    @@@I@@            @      ___   @     /\\  \\  @     \\:\\  \\ @     /::\\__\\@  __/:/\\/__/@ /\\/:/  /   @ \\::/__/    @  \\:\\__\\    @   \\/__/    @            @@@J@@       ___   @      /\\  \\  @      \\:\\  \\ @  ___ /::\\__\\@ /\\  /:/\\/__/@ \\:\\/:/  /   @  \\::/  /    @   \\/__/     @             @             @             @@@K@@      ___     @     /\\__\\    @    /:/  /    @   /:/__/     @  /::\\__\\____ @ /:/\\:::::\\__\\@ \\/_|:|~~|~   @    |:|  |    @    |:|  |    @    |:|  |    @     \\|__|    @@@L@@      ___ @     /\\__\\@    /:/  /@   /:/  / @  /:/  /  @ /:/__/   @ \\:\\  \\   @  \\:\\  \\  @   \\:\\  \\ @    \\:\\__\\@     \\/__/@@@M@@      ___     @     /\\__\\    @    /::|  |   @   /:|:|  |   @  /:/|:|__|__ @ /:/ |::::\\__\\@ \\/__/~~/:/  /@       /:/  / @      /:/  /  @     /:/  /   @     \\/__/    @@@N@@      ___     @     /\\__\\    @    /::|  |   @   /:|:|  |   @  /:/|:|  |__ @ /:/ |:| /\\__\\@ \\/__|:|/:/  /@     |:/:/  / @     |::/  /  @     /:/  /   @     \\/__/    @@@O@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /:/  \\:\\  \\ @ /:/__/ \\:\\__\\@ \\:\\  \\ /:/  /@  \\:\\  /:/  / @   \\:\\/:/  /  @    \\::/  /   @     \\/__/    @@@P@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\  \\ @ /:/\\:\\ \\:\\__\\@ \\/__\\:\\/:/  /@      \\::/  / @       \\/__/  @              @              @@@Q@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @   \\:\\~\\:\\  \\ @    \\:\\ \\:\\__\\@     \\:\\/:/  /@      \\::/  / @      /:/  /  @     /:/  /   @     \\/__/    @@@R@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\:\\  \\  @  /::\\~\\:\\  \\ @ /:/\\:\\ \\:\\__\\@ \\/_|::\\/:/  /@    |:|::/  / @    |:|\\/__/  @    |:|  |    @     \\|__|    @@@S@@      ___     @     /\\  \\    @    /::\\  \\   @   /:/\\ \\  \\  @  _\\:\\~\\ \\  \\ @ /\\ \\:\\ \\ \\__\\@ \\:\\ \\:\\ \\/__/@  \\:\\ \\:\\__\\  @   \\:\\/:/  /  @    \\::/  /   @     \\/__/    @@@T@@      ___     @     /\\  \\    @     \\:\\  \\   @      \\:\\  \\  @      /::\\  \\ @     /:/\\:\\__\\@    /:/  \\/__/@   /:/  /     @   \\/__/      @              @              @@@U@@      ___     @     /\\__\\    @    /:/  /    @   /:/  /     @  /:/  /  ___ @ /:/__/  /\\__\\@ \\:\\  \\ /:/  /@  \\:\\  /:/  / @   \\:\\/:/  /  @    \\::/  /   @     \\/__/    @@@V@@      ___     @     /\\__\\    @    /:/  /    @   /:/  /     @  /:/__/  ___ @  |:|  | /\\__\\@  |:|  |/:/  /@  |:|__/:/  / @   \\::::/__/  @    ~~~~      @              @@@W@@      ___     @     /\\__\\    @    /:/ _/_   @   /:/ /\\__\\  @  /:/ /:/ _/_ @ /:/_/:/ /\\__\\@ \\:\\/:/ /:/  /@  \\::/_/:/  / @   \\:\\/:/  /  @    \\::/  /   @     \\/__/    @@@X@@      ___     @     |\\__\\    @     |:|  |   @     |:|  |   @     |:|__|__ @ ____/::::\\__\\@ \\::::/~~/~   @  ~~|:|~~|    @    |:|  |    @    |:|  |    @     \\|__|    @@@Y@@      ___     @     |\\__\\    @     |:|  |   @     |:|  |   @     |:|__|__ @     /::::\\__\\@    /:/~~/~   @   /:/  /     @   \\/__/      @              @              @@@Z@@      ___     @     /\\  \\    @     \\:\\  \\   @      \\:\\  \\  @       \\:\\  \\ @ _______\\:\\__\\@ \\::::::::/__/@  \\:\\~~\\~~    @   \\:\\  \\     @    \\:\\__\\    @     \\/__/    ';
  let cyberAlphabet = ' @@  @  @  @  @@@A@@____ @|__| @|  | @     @@@B@@___  @|__] @|__] @     @@@C@@____ @|    @|___ @     @@@D@@___  @|  \\ @|__/ @     @@@E@@____ @|___ @|___ @     @@@F@@____ @|___ @|    @     @@@G@@____ @| __ @|__] @     @@@H@@_  _ @|__| @|  | @     @@@I@@_ @| @| @  @@@J@@ _ @ | @_| @   @@@K@@_  _ @|_/  @| \\_ @     @@@L@@_    @|    @|___ @     @@@M@@_  _ @|\\/| @|  | @     @@@N@@_  _ @|\\ | @| \\| @     @@@O@@____ @|  | @|__| @     @@@P@@___  @|__] @|    @     @@@Q@@____ @|  | @|_\\| @     @@@R@@____ @|__/ @|  \\ @     @@@S@@____ @[__  @___] @     @@@T@@___ @ |  @ |  @    @@@U@@_  _ @|  | @|__| @     @@@V@@_  _ @|  | @ \\/  @     @@@W@@_ _ _ @| | | @|_|_| @      @@@X@@_  _ @ \\/  @_/\\_ @     @@@Y@@_   _ @ \\_/  @  |   @      @@@Z@@___  @  /  @ /__ @     ';

  let dollarfont = new Font('DollarFont', createMultilineFont(dollarAlphabet), 9);
  let cyberfont = new Font('Cyberfont', createMultilineFont(cyberAlphabet),4);

  let isofont = new Font('isoFont', createMultilineFont(isoAlphabet), 11);

  $.fn.morserify = function() {
    return this.each(function() {
      let input = $(this).text();
      if(input === undefined){
        console.log("input is undefined");
        return;
      }
      $(this).text(dollarfont.write(input));
    });
  }
})(jQuery);
